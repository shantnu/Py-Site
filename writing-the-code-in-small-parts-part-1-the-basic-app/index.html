<!DOCTYPE html>
<html lang="en-US" class="no-js">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
		<link rel="pingback" href="/xmlrpc.php">
		<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>Writing the Code in Small Parts: Part 1, The Basic App &#8211; Python For Engineers</title>
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Python For Engineers &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="Python For Engineers &raquo; Comments Feed" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Python For Engineers &raquo; Writing the Code in Small Parts: Part 1, The Basic App Comments Feed" href="/writing-the-code-in-small-parts-part-1-the-basic-app/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/pythonforengineers.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-css'  href='/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-github-css'  href='/wp-content/plugins/crayon-syntax-highlighter/themes/github/github.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Merriweather%3A400%2C700%2C900%2C400italic%2C700italic%2C900italic%7CMontserrat%3A400%2C700%7CInconsolata%3A400&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='/wp-content/themes/twentysixteen/genericons/genericons.css?ver=3.4.1' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-style-css'  href='/wp-content/themes/twentysixteen/style.css?ver=4.9.8' type='text/css' media='all' />
<!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css'  href='http://pythonforengineers.com/wp-content/themes/twentysixteen/css/ie.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css'  href='http://pythonforengineers.com/wp-content/themes/twentysixteen/css/ie8.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css'  href='http://pythonforengineers.com/wp-content/themes/twentysixteen/css/ie7.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/pythonforengineers.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta'></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='http://pythonforengineers.com/wp-content/themes/twentysixteen/js/html5.js?ver=3.7.3'></script>
<![endif]-->
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<meta name="generator" content="WordPress 4.9.8" />
<link rel="canonical" href="/writing-the-code-in-small-parts-part-1-the-basic-app/" />
<link rel='shortlink' href='/?p=1715' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fwriting-the-code-in-small-parts-part-1-the-basic-app%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fwriting-the-code-in-small-parts-part-1-the-basic-app%2F&#038;format=xml" />
</head>

<body class="page-template-default page page-id-1715">
<div id="page" class="site">
	<div class="site-inner">
		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		<header id="masthead" class="site-header" role="banner">
			<div class="site-header-main">
				<div class="site-branding">
					
											<p class="site-title"><a href="/" rel="home">Python For Engineers</a></p>
									</div><!-- .site-branding -->

									<button id="menu-toggle" class="menu-toggle">Menu</button>

					<div id="site-header-menu" class="site-header-menu">
													<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Primary Menu">
								<div class="menu-main-container"><ul id="menu-main" class="primary-menu"><li id="menu-item-52" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-52"><a href="/articles/">Articles</a></li>
<li id="menu-item-1533" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1533"><a href="/about/">About</a></li>
<li id="menu-item-35" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-35"><a href="/contact/">Contact</a></li>
</ul></div>							</nav><!-- .main-navigation -->
						
											</div><!-- .site-header-menu -->
							</div><!-- .site-header-main -->

					</header><!-- .site-header -->

		<div id="content" class="site-content">

<div id="primary" class="content-area">
	<main id="main" class="site-main" role="main">
		
<article id="post-1715" class="post-1715 page type-page status-publish hentry">
	<header class="entry-header">
		<h1 class="entry-title">Writing the Code in Small Parts: Part 1, The Basic App</h1>	</header><!-- .entry-header -->

	
	<div class="entry-content">
		<h4><strong>Build a Twitter Analytics App</strong></h4>
<p style="padding-left: 30px;"><strong><a href="/build-a-twitter-analytics-app-using-python/"> 1 Introduction: Start Here</a></strong></p>
<p style="padding-left: 30px;"><strong><a href="/the-first-step-design-your-solution/">2 The First Step: Design Your Solution</a></strong></p>
<p style="padding-left: 30px;"><strong><a href="/in-which-i-rant-a-little/">3 In Which I Rant a Little</a></strong></p>
<p style="padding-left: 30px;"><a href="/twitter-analyser-my-design/"><strong>4  Design Solution</strong> </a></p>
<p style="padding-left: 30px;"><strong><a href="/writing-great-code/">5 Writing Great Code</a></strong></p>
<p style="padding-left: 30px;"><strong>6 Writing the Backend Twitter Server</strong></p>
<p style="padding-left: 60px;"><a href="/writing-the-code-in-small-parts-part-1-the-basic-app/"><strong>Writing the Code in Small Parts: Part 1, The Basic App</strong> </a></p>
<p style="padding-left: 60px;"><strong><a href="/part-2-adding-a-counter-to-exit/">Part 2: Adding a Counter to Exit</a></strong></p>
<p style="padding-left: 60px;"><strong><a href="/part-3-adding-language-and-retweet-count/">Part 3: Adding Language and Retweet Count</a></strong></p>
<p style="padding-left: 60px;"><strong><a href="/organising-our-code/">Part 4: Organising Our Code</a></strong></p>
<p style="padding-left: 30px;"><strong><a href="/adding-the-data-to-a-database/">7 Adding the Data to a Database</a></strong></p>
<p style="padding-left: 30px;"><a href="/testing-what-and-how-to-test/"><strong>8 <span class="trail-end">Testing: What and How to Test</span></strong></a></p>
<p style="padding-left: 60px;"><strong><a href="/testing-our-frontend/">8.1 Testing Our Frontend</a></strong></p>
<p style="padding-left: 60px;"><strong><a href="/testing-our-backend/">8.2 Testing Our Backend</a></strong></p>
<p style="padding-left: 30px;"><strong>9 Displaying our Data using the Flask Webserver</strong></p>
<p style="padding-left: 60px;"><strong><a href="/introduction-to-flask-for-python/">9.1 Introduction to Flask</a></strong></p>
<p style="padding-left: 60px;"><strong><a href="/adding-templates-to-our-flask-app/">9.2 Adding templates to our Flask app</a></strong></p>
<p style="padding-left: 60px;"><strong><a href="/displaying-our-tweets-in-the-flask-web-server/">9.3 Displaying our Tweets in the Flask Web Server</a></strong></p>
<p style="padding-left: 30px;"><strong><a href="/future-work-and-improvements/">10 Future Work and Improvements</a></strong></p>
<p>So finally, we get to the code.</p>
<p>But not too fast.</p>
<p>We&#8217;ll go slow, building our code in stages. After each stage, we&#8217;ll have a mini code review, after which we&#8217;ll fix the code, have another review, &amp; so on. This is for 2 reasons:</p>
<ul>
<li>It&#8217;ll closely mirror how you would work in a real job, although the code reviews won&#8217;t be for such tiny segments</li>
<li>You&#8217;ll learn how to build a large complex apps, starting from tiny files with just a few lines of code.</li>
</ul>
<p>To start with, remember our challenge:</p>
<p><em>1 Search Twitter for a term, say Python.</em></p>
<p><em>2 Find the top trends on Twitter.</em></p>
<p><em>3 Print 100 tweets from the Twitter streaming data.</em></p>
<p>We&#8217;ll start with that.</p>
<p>I hope you have your own solution. If not, have a look at mine. Get the code from <a href="https://github.com/shantnu/TwitterAnalyser/tree/master/Part1">here</a>.</p>
<p>The first thing you need to do is rename <em>local_config_skel.py</em> to <em>local_config.py</em>, and update the security tokens from your own Twitter App (I hope you created a Twitter developer account, and a Twitter dev app).</p>
<p>Next, we&#8217;re going to use a virtual environment to run our code. This is to prevent the <em>Works on my machine</em> problem discussed in the last section. This is optional, but I recommend it. It&#8217;ll also save you from finding the right version of library. Get <em><a href="https://github.com/shantnu/TwitterAnalyser/blob/master/requirements.txt">requirements.tx</a>t</em> from here:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc3c248079752" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
virtualenv venv --no-site-packages    
venv\Scripts\activate
pip install -r requirements.txt</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc3c248079752-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc3c248079752-2">2</div><div class="crayon-num" data-line="crayon-5bcf81087dc3c248079752-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc3c248079752-1"><span class="crayon-e">virtualenv </span><span class="crayon-v">venv</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">no</span><span class="crayon-o">-</span><span class="crayon-v">site</span><span class="crayon-o">-</span><span class="crayon-e">packages&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc3c248079752-2"><span class="crayon-v">venv</span><span class="crayon-sy">\</span><span class="crayon-v">Scripts</span><span class="crayon-sy">\</span><span class="crayon-e">activate</span></div><div class="crayon-line" id="crayon-5bcf81087dc3c248079752-3"><span class="crayon-e">pip </span><span class="crayon-v">install</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-v">requirements</span><span class="crayon-sy">.</span><span class="crayon-v">txt</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p></p>
<p>Now, everytime you want to work on this project, make sure you <em>activate</em> it first. This will ensure you are always using the same version of libraries, and more importantly, if you move to a different machine, or share the code with someone, it will work for them too.</p>
<p><strong>Note</strong>:  ** I strongly** recommend you use something like <em>Ipython QtConsole</em> to run this code. That&#8217;s because the tweets will be in different languages, and most shells won&#8217;t be able to print them. Windows certainly won&#8217;t, and will throw Unicode errors. Linux might as well; although it is possible to configure Linux shells to print unicode, I haven&#8217;t done so myself. Stick to <em>Ipython QtConsole</em>.</p>
<p>Okay, to the code. We&#8217;ll look at the whole code first, and then go line by line.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc48120080578" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
import tweepy
from local_config import *

a=tweepy.OAuthHandler(cons_tok, cons_sec)
a.set_access_token(app_tok, app_sec)
a2=tweepy.API(a)

# Search stuff
tt=tweepy.Cursor(a2.search, q = "Python").items(5)
for t in tt:
    print(t.text)

t2= a2.trends_place(1)

for t in t2[0]["trends"]:
    print(t['name'])</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc48120080578-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc48120080578-2">2</div><div class="crayon-num" data-line="crayon-5bcf81087dc48120080578-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc48120080578-4">4</div><div class="crayon-num" data-line="crayon-5bcf81087dc48120080578-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc48120080578-6">6</div><div class="crayon-num" data-line="crayon-5bcf81087dc48120080578-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc48120080578-8">8</div><div class="crayon-num" data-line="crayon-5bcf81087dc48120080578-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc48120080578-10">10</div><div class="crayon-num" data-line="crayon-5bcf81087dc48120080578-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc48120080578-12">12</div><div class="crayon-num" data-line="crayon-5bcf81087dc48120080578-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc48120080578-14">14</div><div class="crayon-num" data-line="crayon-5bcf81087dc48120080578-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc48120080578-16">16</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc48120080578-1"><span class="crayon-e">import </span><span class="crayon-e">tweepy</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc48120080578-2"><span class="crayon-e">from </span><span class="crayon-e">local_config </span><span class="crayon-e">import *</span></div><div class="crayon-line" id="crayon-5bcf81087dc48120080578-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc48120080578-4"><span class="crayon-v">a</span><span class="crayon-o">=</span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">OAuthHandler</span><span class="crayon-sy">(</span><span class="crayon-v">cons_tok</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cons_sec</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc48120080578-5"><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-e">set_access_token</span><span class="crayon-sy">(</span><span class="crayon-v">app_tok</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">app_sec</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc48120080578-6"><span class="crayon-v">a2</span><span class="crayon-o">=</span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">API</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc48120080578-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc48120080578-8"><span class="crayon-p"># Search stuff</span></div><div class="crayon-line" id="crayon-5bcf81087dc48120080578-9"><span class="crayon-v">tt</span><span class="crayon-o">=</span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">Cursor</span><span class="crayon-sy">(</span><span class="crayon-v">a2</span><span class="crayon-sy">.</span><span class="crayon-v">search</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">q</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Python"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">items</span><span class="crayon-sy">(</span><span class="crayon-cn">5</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc48120080578-10"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">t</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">tt</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5bcf81087dc48120080578-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">t</span><span class="crayon-sy">.</span><span class="crayon-v">text</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc48120080578-12">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc48120080578-13"><span class="crayon-v">t2</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">a2</span><span class="crayon-sy">.</span><span class="crayon-e">trends_place</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc48120080578-14">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc48120080578-15"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">t</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">t2</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">"trends"</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc48120080578-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">t</span><span class="crayon-sy">[</span><span class="crayon-s">'name'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0017 seconds] -->
<p></p>
<p>Ouch. That&#8217;s ugly. The only possible response to that code is to fall down in agony, screaming <em>My eyes! God, my eyes.</em></p>
<p>But let&#8217;s go over it anyway:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc4b303290432" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
import tweepy
from local_config import *</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc4b303290432-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc4b303290432-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc4b303290432-1"><span class="crayon-e">import </span><span class="crayon-e">tweepy</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc4b303290432-2"><span class="crayon-e">from </span><span class="crayon-e">local_config </span><span class="crayon-e">import *</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p>
<p>We import tweepy and the file that contains our password.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc4e940637291" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
a=tweepy.OAuthHandler(cons_tok, cons_sec)
a.set_access_token(app_tok, app_sec)
a2=tweepy.API(a)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc4e940637291-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc4e940637291-2">2</div><div class="crayon-num" data-line="crayon-5bcf81087dc4e940637291-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc4e940637291-1"><span class="crayon-v">a</span><span class="crayon-o">=</span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">OAuthHandler</span><span class="crayon-sy">(</span><span class="crayon-v">cons_tok</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cons_sec</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc4e940637291-2"><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-e">set_access_token</span><span class="crayon-sy">(</span><span class="crayon-v">app_tok</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">app_sec</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc4e940637291-3"><span class="crayon-v">a2</span><span class="crayon-o">=</span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">API</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p></p>
<p>This code sets up our access. Like many APIs, you have authenticate yourself before use. This code has been taken from Tweepys docs, so nothing to explain.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc51481309465" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
tt=tweepy.Cursor(a2.search, q = "Python").items(5)
for t in tt:
    print(t.text)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc51481309465-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc51481309465-2">2</div><div class="crayon-num" data-line="crayon-5bcf81087dc51481309465-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc51481309465-1"><span class="crayon-v">tt</span><span class="crayon-o">=</span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">Cursor</span><span class="crayon-sy">(</span><span class="crayon-v">a2</span><span class="crayon-sy">.</span><span class="crayon-v">search</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">q</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Python"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">items</span><span class="crayon-sy">(</span><span class="crayon-cn">5</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc51481309465-2"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">t</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">tt</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5bcf81087dc51481309465-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">t</span><span class="crayon-sy">.</span><span class="crayon-v">text</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p></p>
<p>We are searching for <em>Python</em>. BTW, if you are unsure about something, it might be easier to look at Twitter&#8217;s official docs, as Tweepy isn&#8217;t well documented. So if you don&#8217;t know what <em>q</em> means in the code above, you can check the <a href="https://dev.twitter.com/rest/reference/get/search/tweets">search function in Twitter.</a></p>
<p>It tells us <em>q</em> is the search term. So obvious (not).</p>
<p>A small problem with Twitter&#8217;s API is that it is not clear how to only return a few results. The link I gave has confusing instructions. In Tweepy, doing <em>.items(5)</em> works, though I had to search a lot to find this.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc54778313945" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
for t in tt:
    print(t.text)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc54778313945-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc54778313945-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc54778313945-1"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">t</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">tt</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc54778313945-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">t</span><span class="crayon-sy">.</span><span class="crayon-v">text</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<p>The search returns an iterator, and we loop over it, printing our search terms.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc57599450104" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
t2= a2.trends_place(1)

for t in t2[0]["trends"]:
    print(t['name'])</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc57599450104-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc57599450104-2">2</div><div class="crayon-num" data-line="crayon-5bcf81087dc57599450104-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc57599450104-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc57599450104-1"><span class="crayon-v">t2</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">a2</span><span class="crayon-sy">.</span><span class="crayon-e">trends_place</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc57599450104-2">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc57599450104-3"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">t</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">t2</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">"trends"</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc57599450104-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">t</span><span class="crayon-sy">[</span><span class="crayon-s">'name'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p></p>
<p>The <em>trends_place</em> function returns the trends. <em>1</em> means global trends. Again, this returns a JSON iterator. We loop over the <em>[&#8220;trends&#8221;]</em> part of the JSON list and print that.</p>
<p>To understand this more, try printing the whole of <em>t2</em> and <em>t2[0][&#8220;trends&#8221;]</em> and <em>t2[0][&#8220;trends&#8221;][0]</em>, and you&#8217;ll understand what the returned Json looks like. This is important, as we will be messing around with Json a lot, as that&#8217;s what Twitter will usually return: Huge &amp; messy Json lists.</p>
<p><strong>Code Review</strong></p>
<p>Okay, do I need to say it? Ugly.</p>
<p>In the previous section we talked about using a coding standard. I&#8217;ll use pep8, which is Python&#8217;s sort of official standard (major libraries like Qt &amp; Unittest don&#8217;t use it strictly). Even better, we&#8217;ll use <em>autopep8</em>, which will fix minor formatting problems. Things like proper spacing, indentation, etc.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc5a643389568" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
autopep8 twit1.py -i -a</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc5a643389568-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc5a643389568-1"><span class="crayon-e">autopep8 </span><span class="crayon-v">twit1</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">a</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<p>The <em>-i</em> flag means do the changes inline (normally, <em>autopep8</em> just prints the changes on screen, and expects you to pipe them to a different file). <em>-a</em> enables aggressive mode, which isn&#8217;t as bad as it sounds, as it just force fixes spacing issues. Like in the code above,</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc5d061436594" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
a=tweepy.OAuthHandler(cons_tok, cons_sec)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc5d061436594-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc5d061436594-1"><span class="crayon-v">a</span><span class="crayon-o">=</span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">OAuthHandler</span><span class="crayon-sy">(</span><span class="crayon-v">cons_tok</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cons_sec</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p></p>
<p>will become</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc60947455559" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
a = tweepy.OAuthHandler(cons_tok, cons_sec)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc60947455559-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc60947455559-1"><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">OAuthHandler</span><span class="crayon-sy">(</span><span class="crayon-v">cons_tok</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cons_sec</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p></p>
<p>Two extra spaces, but it&#8217;s a lot easier to read.</p>
<p>Right, I&#8217;ll just give you the cleaned up code now, and let you judge if it&#8217;s much easier to read:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc62720662404" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
import tweepy
from local_config import *


if __name__ == "__main__":
    auth = tweepy.OAuthHandler(cons_tok, cons_sec)
    auth.set_access_token(app_tok, app_sec)
    twitter_api = tweepy.API(auth)

    # Search stuff
    search_results = tweepy.Cursor(twitter_api.search, q = "Python").items(5)
    for result in search_results:
        print(result.text)

    trends = twitter_api.trends_place(1)

    for trend in trends[0]["trends"]:
        print(trend['name'])</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc62720662404-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc62720662404-2">2</div><div class="crayon-num" data-line="crayon-5bcf81087dc62720662404-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc62720662404-4">4</div><div class="crayon-num" data-line="crayon-5bcf81087dc62720662404-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc62720662404-6">6</div><div class="crayon-num" data-line="crayon-5bcf81087dc62720662404-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc62720662404-8">8</div><div class="crayon-num" data-line="crayon-5bcf81087dc62720662404-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc62720662404-10">10</div><div class="crayon-num" data-line="crayon-5bcf81087dc62720662404-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc62720662404-12">12</div><div class="crayon-num" data-line="crayon-5bcf81087dc62720662404-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc62720662404-14">14</div><div class="crayon-num" data-line="crayon-5bcf81087dc62720662404-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc62720662404-16">16</div><div class="crayon-num" data-line="crayon-5bcf81087dc62720662404-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc62720662404-18">18</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc62720662404-1"><span class="crayon-e">import </span><span class="crayon-e">tweepy</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc62720662404-2"><span class="crayon-e">from </span><span class="crayon-e">local_config </span><span class="crayon-e">import *</span></div><div class="crayon-line" id="crayon-5bcf81087dc62720662404-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc62720662404-4">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc62720662404-5"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">__name__</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"__main__"</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc62720662404-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">auth</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">OAuthHandler</span><span class="crayon-sy">(</span><span class="crayon-v">cons_tok</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cons_sec</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc62720662404-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">auth</span><span class="crayon-sy">.</span><span class="crayon-e">set_access_token</span><span class="crayon-sy">(</span><span class="crayon-v">app_tok</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">app_sec</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc62720662404-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">twitter_api</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">API</span><span class="crayon-sy">(</span><span class="crayon-v">auth</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc62720662404-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc62720662404-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p"># Search stuff</span></div><div class="crayon-line" id="crayon-5bcf81087dc62720662404-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">search_results</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">Cursor</span><span class="crayon-sy">(</span><span class="crayon-v">twitter_api</span><span class="crayon-sy">.</span><span class="crayon-v">search</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">q</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Python"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">items</span><span class="crayon-sy">(</span><span class="crayon-cn">5</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc62720662404-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">result </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">search_results</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5bcf81087dc62720662404-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">result</span><span class="crayon-sy">.</span><span class="crayon-v">text</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc62720662404-14">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc62720662404-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">trends</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">twitter_api</span><span class="crayon-sy">.</span><span class="crayon-e">trends_place</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc62720662404-16">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc62720662404-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">trend </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">trends</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">"trends"</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc62720662404-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">trend</span><span class="crayon-sy">[</span><span class="crayon-s">'name'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0020 seconds] -->
<p></p>
<p><em>search_results</em> instead of <em>tt</em>, <em>result</em> instead of <em>t</em>. This makes it clearer what we are doing. Have the two codes side by a side, and see the difference good variable naming makes.</p>
<p><strong>The Streaming API</strong></p>
<p>The streaming api continuously reads data from Twitter. You get a live stream of live time feed, but this is less than 10% of all live Tweets. Anymore, and you need to pay. However, even this 10% is more than enough for us to handle.</p>
<p>Let&#8217;s look at the code:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc66952640209" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
import tweepy
from tweepy.streaming import StreamListener
from tweepy import Stream
from local_config import *
import json

class l(StreamListener):

    def on_data(self, data):
            j = json.loads(data)
            print(j["text"])
            return True


    def on_error(self, status):
        print(status)

a=tweepy.OAuthHandler(cons_tok, cons_sec)
a.set_access_token(app_tok, app_sec)
a2=tweepy.API(a)


t1= Stream(a, l())    
t1.sample()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc66952640209-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc66952640209-2">2</div><div class="crayon-num" data-line="crayon-5bcf81087dc66952640209-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc66952640209-4">4</div><div class="crayon-num" data-line="crayon-5bcf81087dc66952640209-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc66952640209-6">6</div><div class="crayon-num" data-line="crayon-5bcf81087dc66952640209-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc66952640209-8">8</div><div class="crayon-num" data-line="crayon-5bcf81087dc66952640209-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc66952640209-10">10</div><div class="crayon-num" data-line="crayon-5bcf81087dc66952640209-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc66952640209-12">12</div><div class="crayon-num" data-line="crayon-5bcf81087dc66952640209-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc66952640209-14">14</div><div class="crayon-num" data-line="crayon-5bcf81087dc66952640209-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc66952640209-16">16</div><div class="crayon-num" data-line="crayon-5bcf81087dc66952640209-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc66952640209-18">18</div><div class="crayon-num" data-line="crayon-5bcf81087dc66952640209-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc66952640209-20">20</div><div class="crayon-num" data-line="crayon-5bcf81087dc66952640209-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc66952640209-22">22</div><div class="crayon-num" data-line="crayon-5bcf81087dc66952640209-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc66952640209-24">24</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc66952640209-1"><span class="crayon-e">import </span><span class="crayon-e">tweepy</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc66952640209-2"><span class="crayon-e">from </span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">streaming </span><span class="crayon-e">import </span><span class="crayon-e">StreamListener</span></div><div class="crayon-line" id="crayon-5bcf81087dc66952640209-3"><span class="crayon-e">from </span><span class="crayon-e">tweepy </span><span class="crayon-e">import </span><span class="crayon-e">Stream</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc66952640209-4"><span class="crayon-e">from </span><span class="crayon-e">local_config </span><span class="crayon-e">import *</span></div><div class="crayon-line" id="crayon-5bcf81087dc66952640209-5"><span class="crayon-e">import </span><span class="crayon-e">json</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc66952640209-6">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc66952640209-7"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">l</span><span class="crayon-sy">(</span><span class="crayon-v">StreamListener</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc66952640209-8">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc66952640209-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">on_data</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc66952640209-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">json</span><span class="crayon-sy">.</span><span class="crayon-e">loads</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc66952640209-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">j</span><span class="crayon-sy">[</span><span class="crayon-s">"text"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc66952640209-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">True</span></div><div class="crayon-line" id="crayon-5bcf81087dc66952640209-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc66952640209-14">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc66952640209-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">on_error</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">status</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc66952640209-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">status</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc66952640209-17">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc66952640209-18"><span class="crayon-v">a</span><span class="crayon-o">=</span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">OAuthHandler</span><span class="crayon-sy">(</span><span class="crayon-v">cons_tok</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cons_sec</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc66952640209-19"><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-e">set_access_token</span><span class="crayon-sy">(</span><span class="crayon-v">app_tok</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">app_sec</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc66952640209-20"><span class="crayon-v">a2</span><span class="crayon-o">=</span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">API</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc66952640209-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc66952640209-22">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc66952640209-23"><span class="crayon-v">t1</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Stream</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">l</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc66952640209-24"><span class="crayon-v">t1</span><span class="crayon-sy">.</span><span class="crayon-e">sample</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0021 seconds] -->
<p></p>
<p>I&#8217;ll only go over the new code.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc69602844835" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
class l(StreamListener):

    def on_data(self, data):
            j = json.loads(data)
            print(j["text"])
            return True


    def on_error(self, status):
        print(status)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc69602844835-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc69602844835-2">2</div><div class="crayon-num" data-line="crayon-5bcf81087dc69602844835-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc69602844835-4">4</div><div class="crayon-num" data-line="crayon-5bcf81087dc69602844835-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc69602844835-6">6</div><div class="crayon-num" data-line="crayon-5bcf81087dc69602844835-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc69602844835-8">8</div><div class="crayon-num" data-line="crayon-5bcf81087dc69602844835-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc69602844835-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc69602844835-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">l</span><span class="crayon-sy">(</span><span class="crayon-v">StreamListener</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc69602844835-2">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc69602844835-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">on_data</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc69602844835-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">json</span><span class="crayon-sy">.</span><span class="crayon-e">loads</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc69602844835-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">j</span><span class="crayon-sy">[</span><span class="crayon-s">"text"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc69602844835-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">True</span></div><div class="crayon-line" id="crayon-5bcf81087dc69602844835-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc69602844835-8">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc69602844835-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">on_error</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">status</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc69602844835-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">status</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p></p>
<p>You need to define a class, inherited from <em>Tweepy StreamListener</em>. There are 2 functions you must have: <em>on_data()</em>, which tells Tweepy what to do when a new Tweet is available. In our code, we are loading the json data using the inbuilt <em>json</em> library, and printing the text part of the tweet. The other function is <em>on_error()</em>, and we just print the error status, if we get an error.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc6b185414963" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
t1= Stream(a, l())    
t1.sample()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc6b185414963-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6b185414963-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc6b185414963-1"><span class="crayon-v">t1</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Stream</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">l</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6b185414963-2"><span class="crayon-v">t1</span><span class="crayon-sy">.</span><span class="crayon-e">sample</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p></p>
<p>We create a Twitter stream with our authentication data and the class we created, and then we call the <em>sample()</em> function to get a sample of Tweets.</p>
<p>If you run this code, you might only get 1-2 tweets, or even none. We&#8217;ll come back to that. First, we fix our code. Here is the improved version:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5bcf81087dc6e346024895" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
import tweepy
from tweepy.streaming import StreamListener
from tweepy import Stream
from local_config import *
import json


class twitter_listener(StreamListener):

    def on_data(self, data):
        j = json.loads(data)
        print(j["text"])
        return True

    def on_error(self, status):
        print(status)

if __name__ == "__main__":
    auth = tweepy.OAuthHandler(cons_tok, cons_sec)
    auth.set_access_token(app_tok, app_sec)
    twitter_api = tweepy.API(auth)

    twitter_stream = Stream(auth, twitter_listener())
    try:
        twitter_stream.sample()
    except Exception as e:
        print(e.__doc__)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums" data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-2">2</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-4">4</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-6">6</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-8">8</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-10">10</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-12">12</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-14">14</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-16">16</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-18">18</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-20">20</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-22">22</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-24">24</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5bcf81087dc6e346024895-26">26</div><div class="crayon-num" data-line="crayon-5bcf81087dc6e346024895-27">27</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-1"><span class="crayon-e">import </span><span class="crayon-e">tweepy</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-2"><span class="crayon-e">from </span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">streaming </span><span class="crayon-e">import </span><span class="crayon-e">StreamListener</span></div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-3"><span class="crayon-e">from </span><span class="crayon-e">tweepy </span><span class="crayon-e">import </span><span class="crayon-e">Stream</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-4"><span class="crayon-e">from </span><span class="crayon-e">local_config </span><span class="crayon-e">import *</span></div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-5"><span class="crayon-e">import </span><span class="crayon-e">json</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-6">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-8"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">twitter_listener</span><span class="crayon-sy">(</span><span class="crayon-v">StreamListener</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">on_data</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">json</span><span class="crayon-sy">.</span><span class="crayon-e">loads</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">j</span><span class="crayon-sy">[</span><span class="crayon-s">"text"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">True</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-14">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">on_error</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">status</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">status</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-17">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-18"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">__name__</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"__main__"</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">auth</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">OAuthHandler</span><span class="crayon-sy">(</span><span class="crayon-v">cons_tok</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cons_sec</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">auth</span><span class="crayon-sy">.</span><span class="crayon-e">set_access_token</span><span class="crayon-sy">(</span><span class="crayon-v">app_tok</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">app_sec</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">twitter_api</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tweepy</span><span class="crayon-sy">.</span><span class="crayon-e">API</span><span class="crayon-sy">(</span><span class="crayon-v">auth</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-22">&nbsp;</div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">twitter_stream</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Stream</span><span class="crayon-sy">(</span><span class="crayon-v">auth</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">twitter_listener</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">twitter_stream</span><span class="crayon-sy">.</span><span class="crayon-e">sample</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5bcf81087dc6e346024895-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">except </span><span class="crayon-e">Exception </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5bcf81087dc6e346024895-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-v">__doc__</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0025 seconds] -->
<p></p>
<p>Okay, before we go ahead, look at the 2 versions of the code side by side, by opening the code in separate tabs in your web browser.</p>
<p>For twit1.py:   <a href="https://github.com/shantnu/TwitterAnalyser/blob/master/Part1/twit1.py">Messy </a>and <a href="https://github.com/shantnu/TwitterAnalyser/blob/master/Part1/twit1_clean.py">clean version</a></p>
<p>For Twit2.py: <a href="https://github.com/shantnu/TwitterAnalyser/blob/master/Part1/twit2.py">Messy </a>&amp; <a href="https://github.com/shantnu/TwitterAnalyser/blob/master/Part1/twit2_clean.py">Clean</a></p>
<p><strong>Next Part:</strong> Our streaming app should continue printing tweets till it is killed with Ctrl C. So why does it stop after just a few (or even none) tweets? We&#8217;ll <a href="/part-2-adding-a-counter-to-exit/">fix that</a>.</p>



	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<div id="comments" class="comments-area">

	
	
		<div id="respond" class="comment-respond">
		<h2 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/writing-the-code-in-small-parts-part-1-the-basic-app/#respond" style="display:none;">Cancel reply</a></small></h2>			<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
				<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='1715' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="e847b15fef" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="202"/></p>			</form>
			</div><!-- #respond -->
	
</div><!-- .comments-area -->

	</main><!-- .site-main -->

	
</div><!-- .content-area -->


	<aside id="secondary" class="sidebar widget-area" role="complementary">
		<section id="search-4" class="widget widget_search">
<form role="search" method="get" class="search-form" action="/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
	</label>
	<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</section>	</aside><!-- .sidebar .widget-area -->

		</div><!-- .site-content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
							<nav class="main-navigation" role="navigation" aria-label="Footer Primary Menu">
					<div class="menu-main-container"><ul id="menu-main-1" class="primary-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-52"><a href="/articles/">Articles</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1533"><a href="/about/">About</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-35"><a href="/contact/">Contact</a></li>
</ul></div>				</nav><!-- .main-navigation -->
			
			
			<div class="site-info">
								<span class="site-title"><a href="/" rel="home">Python For Engineers</a></span>
								<a href="https://wordpress.org/" class="imprint">
					Proudly powered by WordPress				</a>
			</div><!-- .site-info -->
		</footer><!-- .site-footer -->
	</div><!-- .site-inner -->
</div><!-- .site -->

<script type='text/javascript' src='/wp-content/themes/twentysixteen/js/skip-link-focus-fix.js?ver=20160816'></script>
<script type='text/javascript' src='/wp-includes/js/comment-reply.min.js?ver=4.9.8'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/themes/twentysixteen/js/functions.js?ver=20160816'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var tve_dash_front = {"ajaxurl":"http:\/\/pythonforengineers.com\/wp-admin\/admin-ajax.php","force_ajax_send":"","is_crawler":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/thrive-visual-editor/thrive-dashboard/js/dist/frontend.min.js?ver=2.0.45'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.9.8'></script>
<script async="async" type='text/javascript' src='/wp-content/plugins/akismet/_inc/form.js?ver=4.0.8'></script>
</body>
</html>
