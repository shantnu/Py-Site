<!DOCTYPE html>
<html lang="en-US" class="no-js">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
		<link rel="pingback" href="/xmlrpc.php">
		<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>What do you do if you break Production Code? &#8211; Python For Engineers</title>
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Python For Engineers &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="Python For Engineers &raquo; Comments Feed" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Python For Engineers &raquo; What do you do if you break Production Code? Comments Feed" href="/break-production-code-what-to-do/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/pythonforengineers.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-css'  href='/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Merriweather%3A400%2C700%2C900%2C400italic%2C700italic%2C900italic%7CMontserrat%3A400%2C700%7CInconsolata%3A400&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='/wp-content/themes/twentysixteen/genericons/genericons.css?ver=3.4.1' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-style-css'  href='/wp-content/themes/twentysixteen/style.css?ver=4.9.8' type='text/css' media='all' />
<!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css'  href='http://pythonforengineers.com/wp-content/themes/twentysixteen/css/ie.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css'  href='http://pythonforengineers.com/wp-content/themes/twentysixteen/css/ie8.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css'  href='http://pythonforengineers.com/wp-content/themes/twentysixteen/css/ie7.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/pythonforengineers.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta'></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='http://pythonforengineers.com/wp-content/themes/twentysixteen/js/html5.js?ver=3.7.3'></script>
<![endif]-->
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<meta name="generator" content="WordPress 4.9.8" />
<link rel="canonical" href="/break-production-code-what-to-do/" />
<link rel='shortlink' href='/?p=679' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fbreak-production-code-what-to-do%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fbreak-production-code-what-to-do%2F&#038;format=xml" />
</head>

<body class="page-template-default page page-id-679">
<div id="page" class="site">
	<div class="site-inner">
		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		<header id="masthead" class="site-header" role="banner">
			<div class="site-header-main">
				<div class="site-branding">
					
											<p class="site-title"><a href="/" rel="home">Python For Engineers</a></p>
									</div><!-- .site-branding -->

									<button id="menu-toggle" class="menu-toggle">Menu</button>

					<div id="site-header-menu" class="site-header-menu">
													<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Primary Menu">
								<div class="menu-main-container"><ul id="menu-main" class="primary-menu"><li id="menu-item-52" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-52"><a href="/articles/">Articles</a></li>
<li id="menu-item-1533" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1533"><a href="/about/">About</a></li>
<li id="menu-item-35" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-35"><a href="/contact/">Contact</a></li>
</ul></div>							</nav><!-- .main-navigation -->
						
											</div><!-- .site-header-menu -->
							</div><!-- .site-header-main -->

					</header><!-- .site-header -->

		<div id="content" class="site-content">

<div id="primary" class="content-area">
	<main id="main" class="site-main" role="main">
		
<article id="post-679" class="post-679 page type-page status-publish hentry">
	<header class="entry-header">
		<h1 class="entry-title">What do you do if you break Production Code?</h1>	</header><!-- .entry-header -->

	
	<div class="entry-content">
		<p><strong>Question</strong>: So you come into work one day, and find everyone staring at you. Most people are avoiding your eyes, and you hear the CEO ask &#8220;Who&#8217;s this &lt;<i>Insert your name</i>&gt; guy? Bring him to me when he turns up.&#8221; You sit on your computer, and find that the one line of code you changed broke every single test in the code base. And an email with your name has been sent to every manager in the company. And then you look down and see you forgot to wear trousers to work. What would you do?</p>
<p>Before I give you the answer, I will make a few bad jokes and pad the word count. If you want a hint at the answer, it involves growing (or shaving) a moustache and moving to Mexico.</p>
<p>Thanks to <a href="http://stackoverflow.com/users/193906/sanjay-t-sharma">Sanjay Sharma</a> for asking this question.</p>
<h4><strong>Don&#8217;t ask me &#8211; I write perfect code</strong></h4>
<p>My first question is: Why are you asking me? Do I look like the sort of man who would break code? I write perfect code, being the Picasso of Programming (PoP). Anything that flows from my fingers is a work of art. In fact, the first time I saw a debugger was after ten years of programming.</p>
<p>Anyway.</p>
<p>First, a true story. It involves my evil twin brother, Bhrantu. Bhrantu looks just like me, except he has a mustache and wears a weird Mexican hat.</p>
<figure id="attachment_675" style="width: 300px" class="wp-caption aligncenter"><a href="http://pyskool.com/wp-content/uploads/2014/03/Shan-mooch.jpg"><img class="size-medium wp-image-675" src="http://pyskool.com/wp-content/uploads/2014/03/Shan-mooch-300x225.jpg" alt="Shan mooch" width="300" height="225" srcset="/wp-content/uploads/2014/03/Shan-mooch-300x225.jpg 300w, /wp-content/uploads/2014/03/Shan-mooch-1024x768.jpg 1024w" sizes="(max-width: 300px) 85vw, 300px" /></a><figcaption class="wp-caption-text">He even looks like an evil twin</figcaption></figure>
<p>Unlike me, he breaks code all the time.</p>
<h4>When Bhrantu broke every test in the whole company</h4>
<p>So my evil twin brother, Bhrantu, who is totally not me (pinky swear) made one line of change to the code. He ran the precommit and post commit tests, and they all passed. So he was happy and checked the code in.</p>
<p>Next morning, he came in to work humming “<em>Girls just wanna have fun</em>” (as all men do, from time to time). He felt a few people staring at him. When he checked the email, he found out why.</p>
<p>Every single of the fifty overnight tests had failed, and Bhrantu’s name was attached to each. So all the managers and most of the engineers received an email like:</p>
<p><em>Test 0 failed. Last checkin: Bhrantu.</em></p>
<p><em>Test 1 failed. Last checkin: Bhrantu.</em></p>
<p><em>…</em></p>
<p><em>Test 50 failed. Last checkin: Bhrantu.</em></p>
<p>Oops.</p>
<p>Luckily, Bhrantu is a master of escape. He changed his name to Jose, grew a mustache, wore a fake Mexican hat, and escaped the country. He is still being followed by assassins from the test team. No one knows where he is.</p>
<p>And that’s one way to deal with a screw up. The actual thing I, sorry, Bhrantu did was, he walked into the team meeting and said “It was me!”</p>
<p><iframe src="//www.youtube.com/embed/a43kowi2ncI" width="420" height="315" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<p>&nbsp;</p>
<h4>What to do when your screw up breaks production code</h4>
<p>In the example above, the problem only affected the overnight test system. Because in a good company, it should be physically impossible for one person to break the production code, even if such a person took an axe and smashed all the servers (because you have backup, right?)</p>
<p><strong>So what do you do?</strong></p>
<p>The first thing is accept responsibility. Calmly explain what happened, and try to fix it. If it is someone else’s fault, let them and your bosses know, but without blaming or being bitchy. So don’t do this:</p>
<p><em>JJ checked in this code before me, and he’s the one who broke it! He should have asked me if he was going to re-architect my design.</em></p>
<p>Do this:</p>
<p><em>JJ checked in some changes before me. Unfortunately, his changes didn’t gel with my architecture. I’m going to discuss with him how we can best move this forward.</em></p>
<p>In the 2<sup>nd</sup> example, you aren’t moaning or bitching. Instead, you are trying to solve the actual problem.</p>
<h4>It’s the systems fault, not your fault</h4>
<p>I don’t mean this in a hippy way. “Hey man, the police and courts are like, so corrupt man! Spread the love, man!”</p>
<p>Big fuck ups are always caused by bad management decisions, not programmers. Don’t believe me? Here are a few examples:</p>
<p><em>1. You check in a change, and it breaks the production server. Customers complain, and your boss says you have to stay the weekend to fix the problem.</em></p>
<p><b>But</b>: Why was your code allowed to go near the production server anyway? It should have run on a test server first. A team of testers should then have tested things like UX which can’t be easily scripted.</p>
<p>Test machines are cheap- just buy a cheap $300 machine and load Ubuntu on it (I don’t know how Windows guys would do it). Add extra RAM and SSD drives if you want speed. Add an automated script that runs the tests on the server everytime you commit anything. Developing automated tests isn’t that hard. There are automated solutions like Jenkins and Travis CI that you can use as the infrastructure.</p>
<p><em>2. You have pre commit tests, but your change still break the overnight system</em></p>
<p>This is what happened to Bhrantu. Basically, the precommit tests didn’t test a flag that the overnight tests did. And the change that broke all tests was one which affected this flag.</p>
<p><b>So again</b>, add that flag to your local tests. Again, this is a system problem. Screw ups will happen, just fix them as soon as you find out.</p>
<p><em>3. You have no tests. That’s what the customer is for!</em></p>
<p>Well, good luck. I admire your courage.</p>
<p>See what I mean that it’s always a system problem?</p>
<h4><b>So what do you do when the fecal matter hits the revolving air circulation device?</b></h4>
<p>You need to have a good talk with your team and boss, and you need to figure out which part of the system broke, and how you can stop it from breaking again. <b>Fixing the immediate problem is not enough.</b> Unless you fix the underlying problem, the screw up will happen again and again. It’s like papering over a broken wall. You aren’t fooling anyone.</p>
<p>You need to convince management to buy you proper testing hardware. This is what you can say:</p>
<p><em>“Hey boss. I spent more than four hours fixing this problem. So you not only lost money on the time I worked on it, but you also lost a huge opportunity, because the time I spent fixing this mess would have been better spent adding features to our code.”</em></p>
<p>This last sentence is important. Companies can lose millions if they don’t have one tiny feature the customer absolutely needs. Not only that, if you are developing software on contract, your customer can sue you for non or late delivery. Trust me, I say this from personal experience. There is nothing like a multi-million dollar suit to convince management to get off their asses and fix structural problems in testing. Say this to your boss: <em>“Would you rather fix this problem once our biggest customer leaves, because we saved pennies by not testing?”</em></p>
<p>Just buying hardware isn’t enough. You then need to develop tests for it. And this is where most managers will balk. Writing automated tests takes time. But ask your boss this: “Would you rather spend $50,000 on tests now, or $500,000 on legal fees when we get sued for shipping broken code to customers?”</p>
<p>Put it in an email if the boss isn’t convinced, and CC everyone important. If the company still won’t do anything, well tough. That’s why I said at the start: <b>This is almost always a management problem.</b></p>
<p><strong>Trying to cut costs by cutting testing is like trying to lose weight by cutting your arm off.</strong> It works in the short term, kills you in the long term.</p>
<h4>Automated testing for you</h4>
<p>No matter where you work, it should not be physically possible to put code from your machine to the production server. Depending on how big you are, you need to do the following:</p>
<p>1. <em>Big Company</em></p>
<p>You should have dedicated test machines, and a dedicated test engineers. I plan to cover this in a future blog, but if you can’t afford test engineers, hire finance and MBA students. Before the recession, thousands entered this field hoping to make a good buck, and are now crying. They usually are good with computers, and with some training, can be taught to script basic tests. Like monkeys, only cheaper.</p>
<p><em>2. Medium/small company</em></p>
<p>You may not be able to afford a full time test team (although, think again. What’s the biggest penalty for not shipping on time? If it’s in the six figures, you can afford a tester. Simple business decision even a MBA can understand).</p>
<p>At the very minimum, have proper servers that automatically run tests when anything in checked in. I keep repeating this, but the automated part is important.</p>
<p><b>You should never be surprised by your test results.</b> If you are, the system is broken. Of course, tests will fail, but they should be fairly predictable. You should never have a situation where your whole website is down because someone didn’t realize that clicking a button on the web browser kills a Linux driver and cause a Segfault(<em>ask me how I know that. Actually, don’t ask, as I start crying every time I tell that story</em>).</p>
<p><em>3. Very small / Freelancer</em></p>
<p>At the bare minimum, you need to run your own tests on your own PC, if you can’t afford a server. If possible use online testing services like Travis CI or Jetbrains. You may have to pay a small amount, but it’s much cheaper than spending hours of your time debugging. Wouldn’t you rather be playing Doom, or whatever it is kids are playing nowadays?</p>
<p>&nbsp;</p>
<p><b>To summarise:</b> If your code breaks the production server, this shows a serious design fault and management failure. It is not your fault, nor the fault of any other engineer. This doesn’t mean you are not responsible. As engineers, it’s our job to guide management on these issues. Who do you think understand more about integration testing: A fifty year old head of product development, or a twenty something engineer?</p>
<p>So let management know, and always, always fix the underlying issue.</p>
<p>Part of the <a title="Masterclass" href="http://pyskool.com/programmer-masterclass/">Programmer Masterclass </a>series.</p>



	</div><!-- .entry-content -->

	
</article><!-- #post-## -->

<div id="comments" class="comments-area">

	
	
		<div id="respond" class="comment-respond">
		<h2 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/break-production-code-what-to-do/#respond" style="display:none;">Cancel reply</a></small></h2>			<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
				<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='679' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="bf689fbd57" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="17"/></p>			</form>
			</div><!-- #respond -->
	
</div><!-- .comments-area -->

	</main><!-- .site-main -->

	
</div><!-- .content-area -->


	<aside id="secondary" class="sidebar widget-area" role="complementary">
		<section id="search-4" class="widget widget_search">
<form role="search" method="get" class="search-form" action="/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
	</label>
	<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</section>	</aside><!-- .sidebar .widget-area -->

		</div><!-- .site-content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
							<nav class="main-navigation" role="navigation" aria-label="Footer Primary Menu">
					<div class="menu-main-container"><ul id="menu-main-1" class="primary-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-52"><a href="/articles/">Articles</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1533"><a href="/about/">About</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-35"><a href="/contact/">Contact</a></li>
</ul></div>				</nav><!-- .main-navigation -->
			
			
			<div class="site-info">
								<span class="site-title"><a href="/" rel="home">Python For Engineers</a></span>
								<a href="https://wordpress.org/" class="imprint">
					Proudly powered by WordPress				</a>
			</div><!-- .site-info -->
		</footer><!-- .site-footer -->
	</div><!-- .site-inner -->
</div><!-- .site -->

<script type='text/javascript' src='/wp-content/themes/twentysixteen/js/skip-link-focus-fix.js?ver=20160816'></script>
<script type='text/javascript' src='/wp-includes/js/comment-reply.min.js?ver=4.9.8'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/themes/twentysixteen/js/functions.js?ver=20160816'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var tve_dash_front = {"ajaxurl":"http:\/\/pythonforengineers.com\/wp-admin\/admin-ajax.php","force_ajax_send":"","is_crawler":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/thrive-visual-editor/thrive-dashboard/js/dist/frontend.min.js?ver=2.0.45'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.9.8'></script>
<script async="async" type='text/javascript' src='/wp-content/plugins/akismet/_inc/form.js?ver=4.0.8'></script>
</body>
</html>
